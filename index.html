<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kis Herceg â€“ RendelÃ©s keresÅ‘</title>
<style>
  body{font-family:Arial;max-width:640px;margin:auto;padding:18px}
  input{width:100%;padding:12px;font-size:16px;box-sizing:border-box}
  button{margin-top:10px;padding:12px;width:100%;font-size:16px;cursor:pointer}
  .box{margin-top:14px;padding:12px;border:1px solid #ddd;border-radius:10px}
</style>
</head>
<body>
<h2>ğŸ“š Kis Herceg â€“ NÃ©v szerinti keresÅ‘</h2>
<p>Ãrd be a neved, Ã©s kilistÃ¡zzuk a tÃ©teleidet.</p>

<input id="name" placeholder="Pl. BÃ­rÃ³ RÃ©ka">
<button onclick="search()">KeresÃ©s</button>

<div class="box" id="result">ğŸ” KeresÃ©shez Ã­rd be a neved.</div>

<script>
async function search() {
  const q = document.getElementById("name").value.trim().toLowerCase();
  const result = document.getElementById("result");
  if (!q) { result.innerHTML = "Ãrj be egy nevet ğŸ™‚"; return; }

  const res = await fetch("rendeles.txt", { cache: "no-store" });
  const text = await res.text();
  const lines = text.split(/\r?\n/);

  let currentTitle = "";
  let found = new Set();

  // gondolatjel lehet: -  â€“  â€”
  const hasDash = (s) => /[-â€“â€”]/.test(s);

  for (const raw of lines) {
    const line = (raw || "").trim();
    if (!line) continue;

    // CÃMSOR: legyen benne "lej" Ã©s valamilyen kÃ¶tÅ‘jel/gondolatjel
    if (hasDash(line) && /lej/i.test(line)) {
      currentTitle = line;
      continue;
    }

    // NÃ©v sorok: "1. NÃ©v" -> "NÃ©v"
    const namePart = line.replace(/^\d+\.\s*/, "").trim();

    if (currentTitle && namePart.toLowerCase().includes(q)) {
      found.add(currentTitle);
    }
  }

  if (found.size === 0) {
    result.innerHTML = "âŒ Nem talÃ¡ltunk talÃ¡latot ezzel a nÃ©vvel.";
    return;
  }

  result.innerHTML = "âœ… Neked Ã©rkezett:<br><br>â€¢ " + [...found].join("<br>â€¢ ");
}
</script>
</body>
</html>
