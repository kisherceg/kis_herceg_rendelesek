<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kis Herceg ‚Äì Rendel√©s keres≈ë</title>
<style>
  body{font-family:Arial;max-width:640px;margin:auto;padding:18px}
  input{width:100%;padding:12px;font-size:16px;box-sizing:border-box}
  button{margin-top:10px;padding:12px;width:100%;font-size:16px;cursor:pointer}
  .box{margin-top:14px;padding:12px;border:1px solid #ddd;border-radius:10px}
</style>
</head>
<body>
<h2>üìö Kis Herceg ‚Äì N√©v szerinti keres≈ë</h2>
<p>√çrd be a neved, √©s kilist√°zzuk a t√©teleidet.</p>

<input id="name" placeholder="Pl. B√≠r√≥ R√©ka">
<button onclick="search()">Keres√©s</button>

<div class="box" id="result">üîé Keres√©shez √≠rd be a neved.</div>

<script>
async function search() {
  const q = document.getElementById("name").value.trim().toLowerCase();
  const result = document.getElementById("result");
  if (!q) { result.innerHTML = "√çrj be egy nevet üôÇ"; return; }

  const res = await fetch("rendeles.txt", { cache: "no-store" });
  const text = await res.text();
  const lines = text.split(/\r?\n/);

  let currentTitle = "";
  let found = new Set();

  for (let raw of lines) {
    const line = raw.trim();
    if (!line) continue;

    // C√≠msor felismer√©se: ha tartalmaz '-' √©s 'lej' akkor ez a t√©tel c√≠me
    if (line.includes("-") && line.toLowerCase().includes("lej")) {
      currentTitle = line;
      continue;
    }

    // N√©v sorok: pl. "1. Kov√°cs Anabella"
    const namePart = line.replace(/^\d+\.\s*/, "").trim();

    if (currentTitle && namePart.toLowerCase().includes(q)) {
      found.add(currentTitle);
    }
  }

  if (found.size === 0) {
    result.innerHTML = "‚ùå Nem tal√°ltunk tal√°latot ezzel a n√©vvel.";
    return;
  }

  let html = "‚úÖ Neked √©rkezett:<br><br>";
  [...found].forEach(t => {
    html += "‚Ä¢ " + t + "<br>";
  });
  result.innerHTML = html;
}
</script>
</body>
</html>
